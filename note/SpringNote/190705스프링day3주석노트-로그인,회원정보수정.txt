190705스프링day3
로그인 기능
/spring/
/spring/signup
/spring/signin
1.컨트롤러에 메소드 생성후@RequestMapping(value="signin",method= RequestMethod.GET)
2.해당 경로에 JSP파일 추가 

서비스-멤버서비스 활용
다오-멤버다오활용 
매퍼-xml추가 -아이디를 넘겨받아 로그인하는거니까 업데이트사용?
vo-멤버브이오 활용 


아이디와 비밀번호를 입력후 로그인 버튼을 클릭하면 
데이터베이스에 있는 회원 테이블에 아이디와 일치하는 정보가 있는지 검색하고 
일치하는 정보가 없으면 로그인실패처리를 하고 
있으면 해당정보를 가져와서 비밀번호 비교후 일치하면 로그인성공처리
일치하지 않으면 로그인실패처리

1.로그인 버튼을 클릭하면 입력한 정보를 컨트롤러에 post방식으로 전달(sysout으로 체크하 기)(jsp)
-개인정보가 있으므로 post방식으로 전달해야함 

2.서비스에게 회원여부를 확인하여 회원이 맞으면 메인페이지로 가고 아니면 로그인페이지로 이동(컨트롤러)

3.dao에게 id와 일치하는 회원 정보를 가져오게 시켜서 저장한 후 저장된 회원 정보가 없으면 (null) 컨트롤러에게 회원 아니라고 알려주고 있으면 가져온 회원정보 비밀번호와 입력한 회원정보 비밀번호를 비교하여 같으면 컨트롤러에게 회원이라고 알려주고 다르면 아니라고 알려준다.
아이디 비번
abc 123
123  456

입력창에 
abc 456 (입력정보) 컨트롤러에전달-서비스에전달 

abc 123 (가져옴)


회원정보수정기능
/spring/member/modify
회원가입 페이지를 이용하여 회원수정 페이지를 생성하고 회원수정기능을 추가하세요 

1.컨트롤러에 modify 메소드를 추가-get,post방식-개인정보 때문에 post도 생성
@RequestMapping(value = "/member/modify", method = RequestMethod.GET)

2.modify.jsp파일생성

회원수정페이지에서 회원정보가 있으면 수정하는데 이때 비번은 기존의 비번과 새로운비번인 2개의 비밀번호정보가 필요  
새로운 비밀번호정보는 어디에??

jsp
1회원수정페이지생성
2서버로 데이터를 전송하기 위한 작업 =>post방식으로 

컨트롤러
1. jsp가 넘겨준 데이터를 가져와서 확인
2. 서비스에게 수정될 회원정보와 기존비밀번호를 알려주면서 회원수정 정보를 요청
3. 회원정보 수정이 성공하면 메인페이지로 실패하면 현재페이지유지

서비스
1. db의 비밀번호와 기존비밀번호가 일치하는지 확인하여 일치하지 않으면 수정실패라고 알려줌
2.일치하면 회원정보 수정을 위해 dao에게 수정될 회원정보를 전달하여 db에 회원테이블업데이트요청

다오
1.회원정보를 이용하여 회원 테이블 업데이트 쿼리문 작성





 